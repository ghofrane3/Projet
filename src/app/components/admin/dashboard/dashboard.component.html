<div class="admin-dashboard">
  <!-- Header -->
  <div class="dashboard-header">
    <h1>ğŸ‘¨â€ğŸ’¼ Dashboard Administrateur</h1>
    <p>Bienvenue sur votre tableau de bord</p>
  </div>

  <!-- Stats Cards -->
  <div class="stats-grid">
    <div class="stat-card">
      <div class="stat-icon orders">ğŸ“¦</div>
      <div class="stat-content">
        <h3>{{ stats.totalOrders }}</h3>
        <p>Commandes totales</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon products">ğŸ›ï¸</div>
      <div class="stat-content">
        <h3>{{ stats.totalProducts }}</h3>
        <p>Produits en stock</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon pending">â³</div>
      <div class="stat-content">
        <h3>{{ stats.pendingOrders }}</h3>
        <p>En attente</p>
      </div>
    </div>

    <div class="stat-card">
      <div class="stat-icon revenue">ğŸ’°</div>
      <div class="stat-content">
        <h3>{{ formatCurrency(stats.totalRevenue) }}</h3>
        <p>Revenu total</p>
      </div>
    </div>
  </div>

  <!-- Quick Actions -->
  <div class="quick-actions">
    <h2>Actions rapides</h2>
    <div class="action-buttons">
      <button class="action-btn" routerLink="/admin/products/new">
        â• Ajouter un produit
      </button>
      <button class="action-btn" routerLink="/admin/products">
        ğŸ“¦ GÃ©rer les produits
      </button>
      <button class="action-btn" routerLink="/admin/orders">
        ğŸ“‹ Toutes les commandes
      </button>
      <button class="action-btn" routerLink="/admin/users">
        ğŸ‘¥ GÃ©rer les utilisateurs
      </button>
    </div>
  </div>

  <!-- Orders Management -->
  <div class="orders-section">
    <div class="section-header">
      <h2>Commandes rÃ©centes</h2>

      <!-- Filters -->
      <div class="filters">
        <input
          type="text"
          placeholder="ğŸ” Rechercher un client..."
          [(ngModel)]="searchTerm"
          (ngModelChange)="onSearchChange()"
          class="search-input"
        />

        <select
          [(ngModel)]="statusFilter"
          (ngModelChange)="onStatusFilterChange()"
          class="status-filter"
        >
          <option value="all">Tous les statuts</option>
          <option value="pending">En attente</option>
          <option value="processing">En cours</option>
          <option value="shipped">ExpÃ©diÃ©e</option>
          <option value="delivered">LivrÃ©e</option>
          <option value="cancelled">AnnulÃ©e</option>
        </select>
      </div>
    </div>

    <!-- Loading State -->
    <div *ngIf="loading" class="loading">
      <div class="spinner"></div>
      <p>Chargement des commandes...</p>
    </div>

    <!-- Error State -->
    <div *ngIf="error && !loading" class="error-message">
      <p>{{ error }}</p>
      <button (click)="loadDashboardData()">RÃ©essayer</button>
    </div>

    <!-- Orders Table -->
    <div *ngIf="!loading && !error" class="orders-table-container">
      <table class="orders-table">
        <thead>
          <tr>
            <th>ID</th>
            <th>Client</th>
            <th>Date</th>
            <th>Montant</th>
            <th>Statut</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let order of filteredOrders">
            <td class="order-id">#{{ order._id.substring(0, 8) }}</td>
            <td class="customer-info">
              <div class="customer-name">{{ order.userId.name }}</div>
              <div class="customer-email">{{ order.userId.email }}</div>
            </td>
            <td>{{ formatDate(order.createdAt) }}</td>
            <td class="amount">{{ formatCurrency(order.totalAmount) }}</td>
            <td>
              <span class="status-badge" [ngClass]="getStatusClass(order.status)">
                {{ getStatusLabel(order.status) }}
              </span>
            </td>
            <td class="actions">
              <select
                [(ngModel)]="order.status"
                (ngModelChange)="updateOrderStatus(order._id, order.status)"
                class="status-select"
              >
                <option value="pending">En attente</option>
                <option value="processing">En cours</option>
                <option value="shipped">ExpÃ©diÃ©e</option>
                <option value="delivered">LivrÃ©e</option>
                <option value="cancelled">AnnulÃ©e</option>
              </select>
              <button class="btn-view" [routerLink]="['/admin/orders', order._id]">
                ğŸ‘ï¸
              </button>
            </td>
          </tr>
        </tbody>
      </table>

      <!-- Empty State -->
      <div *ngIf="filteredOrders.length === 0" class="empty-state">
        <p>Aucune commande trouvÃ©e</p>
      </div>
    </div>
  </div>
</div>
